# PRD: 강사 일정 관리 서비스 (instructor-scheduler)

> 교육에 투입할 강사의 일정을 추적하고, 같은 날 중복 배정을 방지하는 웹 앱

## 1. 제품 비전

운영팀이 교육 과정에 강사를 배정할 때, 같은 날 중복 배정을 시스템 레벨에서 자동 차단하여 배정 실수를 원천 봉쇄한다. 강사 본인도 자기 일정을 한눈에 확인할 수 있다. 교육 과정 데이터는 기존 Notion 강의 대시보드에서 가져와 별도 입력 없이 활용한다.

## 2. 대상 사용자

| 역할 | 설명 | 주요 행동 |
|------|------|----------|
| **운영팀 관리자** (admin) | 교육 운영 담당자 | 강사 등록, 교육 일정 관리, 강사 배정, 전체 캘린더 조회 |
| **강사** (instructor) | 교육 투입 강사 (50명 이상) | 자기 배정 일정 조회, 캘린더 뷰 |

## 3. 핵심 기능 (MVP)

### 3.1 강사 관리

- 강사 프로필 등록/수정/삭제 (이름, 연락처, 전문 분야 등)
- 강사 목록 조회 및 검색

### 3.2 교육 일정 관리

- **Notion 연동**: 교육 과정 데이터는 Notion 강의 대시보드에서 조회
  - Notion에서 교육 목록/상세 정보를 가져와 로컬 캐시 테이블(`courses`)에 동기화
  - 운영팀이 "교육 동기화" 버튼으로 최신 데이터 반영
- 교육 날짜(course_dates) 등록: 하루짜리 / 며칠짜리 모두 지원
- 교육별 날짜 목록 조회

### 3.3 강사 배정

- 특정 교육 날짜에 강사 배정 (반 지정: A반, B반 등)
- **같은 날 중복 배정 자동 차단** (DB UNIQUE 제약)
- 배정 해제
- 교육별/강사별 배정 현황 조회

### 3.4 캘린더 뷰

- 월간/주간 캘린더에서 교육 일정 + 배정 현황 표시
- 관리자: 전체 강사 일정 조회
- 강사: 자기 일정만 조회

## 4. Non-goals (MVP 제외)

- 강사 자동 추천/최적 배정 알고리즘
- 강사 급여/정산 관리
- 교육 수강생 관리
- 알림/메일 발송 (Slack, 이메일 등)
- 교육 평가/피드백 수집
- Notion에 역방향 쓰기 (읽기 전용 연동)
- 모바일 전용 앱 (반응형 웹으로 대체)

## 5. 사용자 플로우

### 5.1 관리자 플로우

```
로그인 (Google OAuth)
  → 대시보드 (오늘의 배정 현황)
  → [강사 관리] 강사 등록/수정/삭제
  → [교육 일정] Notion에서 교육 동기화 → 교육 날짜 등록
  → [강사 배정] 교육 날짜 선택 → 강사 배정 (중복 시 에러 표시)
  → [캘린더] 월간/주간 전체 일정 확인
```

### 5.2 강사 플로우

```
로그인 (Google OAuth)
  → 대시보드 (내 다음 배정)
  → [내 일정] 캘린더에서 내 배정 일정 확인
```

## 6. 업무 규칙

| # | 규칙 | DB 구현 |
|---|------|---------|
| R1 | 강사 1명은 하루에 1개 교육만 가능 | `assignments` 테이블에 `UNIQUE(instructor_id, date)` |
| R2 | 교육 1개에 여러 강사 배정 가능 (반별) | 제약 없음 — 같은 course_date에 여러 assignment 허용 |
| R3 | 교육은 하루짜리 / 며칠짜리 모두 존재 | `course_dates` 테이블에 날짜별 레코드 생성 |
| R4 | 교육 데이터는 Notion이 원본 | `courses.notion_page_id`로 매핑, 로컬은 캐시 |
| R5 | 관리자만 배정/관리 가능, 강사는 조회만 | RLS 정책 + role 기반 접근 제어 |

## 7. 성공 기준

| 기준 | 측정 방법 |
|------|----------|
| 중복 배정 0건 | DB UNIQUE 제약으로 원천 차단, 배정 시도 시 명확한 에러 메시지 |
| Notion 교육 데이터 자동 연동 | 동기화 버튼 클릭 → 5초 이내 교육 목록 갱신 |
| 관리자가 배정 완료까지 3단계 이내 | 교육 선택 → 날짜 선택 → 강사 배정 |
| 강사가 10초 이내에 자기 일정 확인 | 로그인 → 대시보드에서 바로 확인 |
| 50명 이상 강사 데이터 정상 처리 | 목록 조회 응답 1초 이내 |
